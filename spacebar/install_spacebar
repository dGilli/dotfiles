#!/bin/bash

# Usage: ./install_spacebar.sh /desired/output/path

if [ -z "$1" ]; then
  echo "Error: No output path provided."
  echo "Usage: $0 /desired/output/path"
  exit 1
fi

OUTPUT_PATH="$1"
TEMP_DIR=$(mktemp -d)

echo "Cloning spacebar repository into temporary directory: $TEMP_DIR"
git clone https://github.com/cmacrae/spacebar.git "$TEMP_DIR"

echo "Building spacebar..."
make -C "$TEMP_DIR"

mkdir -p "$OUTPUT_PATH"

echo "Copying built binary to $OUTPUT_PATH/spacebar"
cp -a "$TEMP_DIR/bin/spacebar" "$OUTPUT_PATH"

echo "Spacebar installed successfully to $OUTPUT_PATH"
